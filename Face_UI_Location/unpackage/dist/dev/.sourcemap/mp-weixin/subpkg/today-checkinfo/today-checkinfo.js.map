{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Hbuilder/Face_UI_Location/subpkg/today-checkinfo/today-checkinfo.vue?083b","webpack:///D:/Hbuilder/Face_UI_Location/subpkg/today-checkinfo/today-checkinfo.vue?a670","webpack:///D:/Hbuilder/Face_UI_Location/subpkg/today-checkinfo/today-checkinfo.vue?9ea0","webpack:///D:/Hbuilder/Face_UI_Location/subpkg/today-checkinfo/today-checkinfo.vue?936f","uni-app:///subpkg/today-checkinfo/today-checkinfo.vue","webpack:///D:/Hbuilder/Face_UI_Location/subpkg/today-checkinfo/today-checkinfo.vue?8cfa","webpack:///D:/Hbuilder/Face_UI_Location/subpkg/today-checkinfo/today-checkinfo.vue?a1f8"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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","file":"subpkg/today-checkinfo/today-checkinfo.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subpkg/today-checkinfo/today-checkinfo.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./today-checkinfo.vue?vue&type=template&id=a20ce860&\"\nvar renderjs\nimport script from \"./today-checkinfo.vue?vue&type=script&lang=js&\"\nexport * from \"./today-checkinfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./today-checkinfo.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subpkg/today-checkinfo/today-checkinfo.vue\"\nexport default component.exports","export * from \"-!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./today-checkinfo.vue?vue&type=template&id=a20ce860&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./today-checkinfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./today-checkinfo.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"body\">\r\n    <!--    todaycheckinfo\r\n    根据课程的签到状态来决定是否能签上到，也就是ischeck，如果ischeck为0的话就可以滑动来进行签到。 -->\r\n    <scroll-view scroll-x=\"true\">\r\n      <view style=\"height: 30rpx;\"></view>\r\n      <view class=\"todayCheckInfoList\" v-for=\"(item,i) in todayCheckInfoList\" :key=\"i\">\r\n        <view class=\"course\">{{item.course}}</view>\r\n        <!-- 判断ischeck的值来判断签到的颜色 -->\r\n        <block v-if=\"item.ischeck===1\">\r\n          <!-- 如果签上到了还要判断签到是否过期 -->\r\n          <block v-if=\"item.checkinfo===0\">\r\n            <view class=\"teaname\">{{item.teaname}}</view>\r\n            <view class=\"ischeckstring\" style=\"color: #F9AE3D; font-size: 30px; width: 40%; padding-left: 450rpx;\">\r\n              {{item.checkinfostring}}\r\n            </view>\r\n          </block>\r\n\r\n          <block v-else>\r\n            <view class=\"teaname\">{{item.teaname}}</view>\r\n            <view class=\"ischeckstring\" style=\"color: #18BC37;\">{{item.ischeckstring}}</view>\r\n          </block>\r\n\r\n        </block>\r\n        <block v-else>\r\n          <view class=\"teaname\">{{item.teaname}}</view>\r\n          <view class=\"ischeckstring\" style=\"color: #E43D33;\" @click=\"checkthiscourse(item)\">{{item.ischeckstring}}\r\n          </view>\r\n        </block>\r\n        <!--        <view class=\"checkinfostring\">{{item.checkinfostring}}</view> -->\r\n        <view class=\"coursebegin\">{{item.coursebegin}}</view>\r\n        <view class=\"checklocation\">{{item.checklocation}}</view>\r\n      </view>\r\n    </scroll-view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    mapState\r\n  } from 'vuex'\r\n  import {\r\n    mapMutations\r\n  } from 'vuex'\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        sno: 0,\r\n        cno: 0,\r\n        todayCheckInfoList: [],\r\n        jingdu: 0,\r\n        weidu: 0\r\n      };\r\n    },\r\n    onLoad(options) {\r\n      this.sno = options.sno\r\n      this.getTodaycheckInfo()\r\n      this.cno = options.cno\r\n    },\r\n    methods: {\r\n      // ...mapMutations('c_count', ['updateCheckCount']),\r\n\r\n      // getCheckCount() {\r\n      //   console.log(\"调用了此函数\");\r\n      //   console.log(\"数组的长度为\"+this.todayCheckInfoList.length);\r\n      //   this.updateCheckCount(this.todayCheckInfoList.length)\r\n      // },\r\n      checkthiscourse(item) {\r\n        // 应该先调用摄像头，r人脸识别成功的时候再获取位置信息\r\n        let that = this\r\n        uni.chooseMedia({\r\n          count: 1,\r\n          mediaType: 'image',\r\n          sourceType: 'camera',\r\n          maxDuration: 30,\r\n          camera: 'back',\r\n          success(res) {\r\n            console.log(\"是否获取图片成功\");\r\n            that.src = res.tempFiles[0].tempFilePath\r\n            const fs = wx.getFileSystemManager()\r\n            // 成功之后将数据的baseurl进行上传\r\n            fs.readFile({\r\n              filePath: that.src,\r\n              encoding: 'base64',\r\n              position: 0,\r\n              success(res) {\r\n                console.log(res.data)\r\n                that.base = res.data\r\n                uni.request({\r\n                  url: 'http://43.143.44.118:8089/face/vef',\r\n                  method: 'POST',\r\n                  data: {\r\n                    imageBase: that.base\r\n                  },\r\n                  success(res) {\r\n                    console.log(\"把图片上传之后进行比较\")\r\n                    //应该再上传图片成功之后再进行地点和日期的判断\r\n                    console.log(res);\r\n                    if(res.data.code==200){\r\n                      wx.getFuzzyLocation({\r\n                        type: 'wgs84',\r\n                        success(res) {\r\n                          //获取经纬度信息\r\n                          let those = that\r\n                          console.log(res.latitude)\r\n                          console.log(res.longitude)\r\n                          that.jingdu = res.longitude\r\n                          that.weidu = res.latitude\r\n                          uni.request({\r\n                            url: 'http://43.143.44.118:8888/checkinfo/submitcheckinfo',\r\n                            method: 'POST',\r\n                            data: {\r\n                              checkid: item.checkid,\r\n                              jingdu: that.jingdu,\r\n                              weidu: that.weidu,\r\n                              sno: that.sno,\r\n                              cno: item.cno\r\n                            },\r\n                            success(res) {\r\n                              console.log(\"成功后的回调函数\")\r\n                              that.todayCheckInfoList = res.data.data\r\n                              console.log(that.todayCheckInfoList);\r\n                              for (let i = 0; i < that.todayCheckInfoList.length; i++) {\r\n                                if (res.data.data[i].checkid === item.checkid) {\r\n                                  //说明点击到了同一个签到信息\r\n                                  console.log(item.checkid);\r\n                                  console.log(\"通过了判断\")\r\n                                  console.log(that.todayCheckInfoList[i].checkinfo);\r\n                                  if (res.data.data[i].checkinfo === 0 && res.data.data[i].ischeck ===\r\n                                    1) {\r\n                                    uni.showToast({\r\n                                      title: '签到过期了下次来咯!',\r\n                                      duration: 1500,\r\n                                      icon: 'none',\r\n                                    })\r\n                                  }\r\n                                  if (res.data.data[i].ischeck === 1 && res.data.data[i].checkinfo ===\r\n                                    2) {\r\n                                    uni.showToast({\r\n                                      title: '签到成功咯>_<!',\r\n                                      duration: 1500,\r\n                                      icon: 'none',\r\n                                    })\r\n                                  }else {\r\n                                    uni.showToast({\r\n                                      title: '签到距离不够啊!',\r\n                                      duration: 1500,\r\n                                      icon: 'none',\r\n                                    })\r\n                                  }\r\n                                }\r\n                              }\r\n                              setTimeout(() => {\r\n                                that.getTodaycheckInfo()\r\n                              }, 1500)\r\n                            }\r\n                          })\r\n                        },\r\n                        fail() {\r\n                          console.log(\"接口调用失败\")\r\n                        }\r\n                      })\r\n                    }else{\r\n                      uni.showToast({\r\n                        title: '人脸识别失败!',\r\n                        duration: 1500,\r\n                        icon: 'none',\r\n                      })\r\n                    }\r\n                  }\r\n                })\r\n              },\r\n              fail(res) {\r\n                console.error(res)\r\n              }\r\n            })\r\n          },fail(){\r\n            uni.showToast({\r\n              title: '人脸识别失败!',\r\n              duration: 1500,\r\n              icon: 'none',\r\n            })\r\n          }\r\n        })\r\n        //发送请求到后端对比，请求的参数是学号，课程号，date(这个参数在后端获取)，通过这三个参数就可以唯一确定老师的签到信息和学生的签到信息。\r\n        console.log(\"签到成功！并且获取课程编号\" + item.cno + \"获取老师发起签到的唯一主键\" + item.checkid)\r\n        //通过唯一主键可以确定需要的老师发送的签到表，然后在后端进行比对\r\n        //向后端发送请求请求参数应该有经纬度，学号和点击的tcno唯一主键信息(还是拿post请求交把)\r\n      },\r\n      async getTodaycheckInfo() {\r\n        let that = this\r\n        console.log(\"执行了getTodaycheckInfo方法\")\r\n        const data = await uni.$http.get('/checkinfo/getstucheckinfo?sno=' + this.sno)\r\n        console.log(data)\r\n        this.todayCheckInfoList = data.data.data\r\n\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  .body {\r\n    background-color: #007AFF;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    background-size: 100% 100%;\r\n    background-attachment: fixed;\r\n    width: 100%;\r\n    height: 100%;\r\n    height: 100vh;\r\n  }\r\n\r\n  .todayCheckInfoList {\r\n    border-radius: 30px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    margin: 0rpx 15rpx 10rpx 15rpx;\r\n    background-color: #efefef;\r\n    height: 370rpx;\r\n    border: 2px solid #BEF5C8;\r\n  }\r\n\r\n  .course,\r\n  .teaname,\r\n  .ischeckstring,\r\n  .checkinfostring,\r\n  .coursebegin,\r\n  .checklocation {\r\n    padding: 0px 30rpx 0px 30rpx;\r\n    display: flex;\r\n  }\r\n\r\n  .course {\r\n    font-size: 22px;\r\n    margin-top: 20rpx;\r\n  }\r\n\r\n  .teaname {\r\n    margin-top: 2rpx;\r\n  }\r\n\r\n  .ischeckstring {\r\n    font-size: 30px;\r\n    padding-left: 550rpx;\r\n  }\r\n\r\n  .coursebegin,\r\n  .checklocation {\r\n    padding-left: 545rpx;\r\n  }\r\n</style>\n","import mod from \"-!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./today-checkinfo.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./today-checkinfo.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1681547116031\n      var cssReload = require(\"D:/ffyc/工具包/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}